<app-alert [alert]="alert"></app-alert>

<div class="bg-light px-4">
  <a class="btn btn-outline-dark mt-3" routerLink="../">Back to Event List</a>

  <div *ngIf="event">
    <a class="btn btn-outline-dark mb-3" routerLink="/events/{{event.id}}">To User View</a>

    <div class="mt-3 bg-light">
      <h3>Event: {{event.name}}</h3>
      <div class="px-3">
        <app-event-edit [event]="event" (image)="image=$event"></app-event-edit>
        <button [disabled]="submitting?'true':null" type="button" class="btn btn-outline-primary btn-block" (click)="editEvent()">Save changes</button>
      </div>
      <img *ngIf="event.image" src="{{imagePath()}}" alt="event image" class="event-img mt-3">
    </div>

    <h3 class="mt-4">New Show</h3>
    <div class="px-3">
      <app-show-edit [show]="show" (alert)="alert=$event"></app-show-edit>
      <button [disabled]="submitting?'true':null" type="submit" class="btn btn-outline-primary btn-block" (click)="newShow()">New Show</button>
    </div>

    <h3 class="mt-4">Show List</h3>
    <table class="table table-hover table-striped">
      <thead>
      <tr>
        <td></td>
        <td>Date</td>
        <td>Time</td>
        <td>Location</td>
        <td>Hall</td>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let show of event.shows; let i=index">
        <td class="p-2">
          <a class="btn btn-sm btn-outline-dark" routerLink="shows/{{show.id}}">Edit</a>
          <!--<button type="button" class="btn btn-sm btn-outline-danger" (click)="delete(i, show.id)">Delete</button>-->
        </td>
        <td>{{show.date}}</td>
        <td>{{show.hour}}:{{show.minute}}</td>
        <td>{{show.hallplan.location.name}}, {{show.hallplan.location.street}}</td>
        <td>{{show.hallplan.name}}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

